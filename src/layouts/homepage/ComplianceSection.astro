---
import {
  MessageSquareWarning,
  BadgeDollarSign,
  RouteOff,
  Bike,
} from "@lucide/astro";
const cards = [
  {
    text: "Modern business leaders are plagued by increasing complexity of systems, conflicting information, and an ever-expanding market of SaaS tools that solve niche problems but fail to provide holistic solutions.",
    icon: MessageSquareWarning,
  },
  {
    text: "Most companies are solving this problem by spending huge amounts of time and money supporting niche projects for each customer or requirement",
    icon: BadgeDollarSign,
  },
  {
    text: "They donâ€™t have the experience or access to best practices that would remove toil from their programs and enable them to focus more deeply on their businesses",
    icon: RouteOff,
  },
  {
    text: "Leaders using existing tools discover they are proprietary, costly, and inflexible to the dynamic needs of businesses and auditors",
    icon: Bike,
  },
];
---

<section
  id="compliance-section"
  class="py-16 pt-0 px-6 md:px-12 lg:px-24 bg-slate-50"
>
  <div
    class="max-w-[1290px] mx-auto grid:none sm:grid grid-cols-1 lg:grid-cols-5 gap-12"
  >
    <div class="col-span-2 max-w-[437px] mt-1 sm:mt-12">
      <p class="font-medium text-base mb-2 compliance-label">
        Who needs compliance?
      </p>
      <p
        class="text-4xl font-medium leading-[36px] mb-6 tracking-[-0.9px] compliance-title"
      >
        Across all levels of an organization, and everyone in a business needs
        compliance.
      </p>
      <p class="font-normal text-lg leading-7 compliance-text">
        Au trade dripper black cup steamed plunger foam french et au. Coffee
        iced aromatic press saucer doppio ut qui. Sugar seasonal panna fair ut
        pumpkin and latte foam robusta.
      </p>
    </div>

    <div class="col-span-3">
      <p
        class="text-3xl leading-9 font-medium pb-[20px] tracking-[-0.75px] pt-10 sm:pt-0 compliance-subtitle"
      >
        Compliance nowadays...
      </p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        {
          cards.map(({ text, icon: Icon }) => (
            <div class="relative p-[25px] px-[34px] h-[216px] rounded-xl bg-color-card">
              <p class="font-normal text-sm leading-7">{text}</p>
              <div class="absolute bottom-0 right-0 opacity-10 p-2">
                <Icon class="color-light" size={58} />
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </div>
</section>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  document.addEventListener("astro:page-load", () => {
    if (window.innerWidth < 768) return;

    const section = document.getElementById("compliance-section");

    gsap.from(
      [
        ".compliance-label",
        ".compliance-title",
        ".compliance-text",
        ".compliance-subtitle",
      ],
      {
        opacity: 0,
        y: 40,
        duration: 0.6,
        stagger: 0.2,
        ease: "power2.out",
        scrollTrigger: {
          trigger: section,
          start: "top 80%",
          toggleActions: "play none none none",
        },
      },
    );

    const cards = section.querySelectorAll(".bg-color-card");

    gsap.from(cards, {
      opacity: 0,
      y: 50,
      duration: 0.6,
      stagger: 0.2,
      ease: "power2.out",
      scrollTrigger: {
        trigger: cards[0]?.parentElement,
        start: "top 85%",
        toggleActions: "play none none reverse",
      },
    });

    cards.forEach((card) => {
      card.addEventListener("mouseenter", () => {
        gsap.to(card, {
          scale: 1.04,
          duration: 0.3,
          ease: "power2.out",
        });
      });
      card.addEventListener("mouseleave", () => {
        gsap.to(card, {
          scale: 1,
          duration: 0.3,
          ease: "power2.out",
        });
      });

      const icon = card.querySelector("svg");
      if (icon) {
        gsap.to(icon, {
          y: -10,
          duration: 2,
          repeat: -1,
          yoyo: true,
          ease: "sine.inOut",
        });
      }
    });
  });
</script>
