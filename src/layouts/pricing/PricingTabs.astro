---
import ModuleAddOnCard from "../../components/pricing/module-add-on-card.astro";

type PricingPlan = {
  title: string;
  description: string;
  price: string;
  annualPrice: string;
  features: string[];
  comingSoon?: boolean;
};

type PricingData = {
  Modules: PricingPlan[];
  Addons: PricingPlan[];
};

const pricingData: PricingData = {
  Modules: [
    {
      title: "Compliance Module",
      description:
        "Build and run a structured, audit-ready compliance program without changing how your team works. Centralize policies, evidence, risk, vendors, and controls in one system designed to scale with your organization.",
      price: "$450",
      annualPrice: "$5,000",
      features: [
        "Unlimited Frameworks",
        "Program Creation",
        "Evidence Upload",
        "Policy and Procedures",
        "Vendor Management",
        "Risk Management",
        "Asset Management",
        "Personnel Management",
        "Questionnaire Automation",
        "Vulnerability Management",
        "Integrations",
        "Configurable Workflows and Notifications",
        "User and Group Level Permissions",
        "Unlimited Users",
        "Single Sign-On (SSO)",
        "Auditor Access",
        "1:1 Slack Support",
      ],
    },
    {
      title: "Trust Center",
      description:
        "Show prospects and customers exactly how you handle security and compliance. Share documentation behind NDA, customize your branding, and provide transparent subprocessor disclosures all in a professional Trust Center built to accelerate your sales process.",
      price: "$300",
      annualPrice: "$3,000",
      features: [
        "Unlimited Documents",
        "Subprocessor Management",
        "Clickwrap NDA",
        "Visitor Analytics",
        "Custom Domain and Branding",
        "Subprocessor Embedding",
      ],
    },
  ],
  Addons: [
    {
      title: "Additional Evidence Storage (100GB)",
      description:
        "Expand your secure storage capacity for compliance evidence. Keep your documentation organized and accessible.",
      price: "$10",
      annualPrice: "n/a",
      features: ["Secure Storage for Additional Evidence"],
    },
    {
      title: "Trust Center Attribution Removal",
      description:
        "Removes the \u201cPowered by Openlane\u201d footer from your Trust Center.",
      price: "$10",
      annualPrice: "$100",
      features: [
        "Remove Attribution from Trust Center",
        "Custom Footer Text",
        "Custom Footer Link",
      ],
      comingSoon: true,
    },
  ],
};
---

<div class="min-h-screen pt-10 pb-1">
  <div class="flex justify-center mb-10">
    <div class="flex bg-card rounded-full p-1 shadow-sm">
      <button
        data-billing="monthly"
        class="relative px-8 py-2 rounded-full font-semibold text-lg transition-all duration-150 bg-white shadow z-1"
      >
        Monthly
      </button>
      <button
        data-billing="yearly"
        class="relative px-8 py-2 rounded-full font-semibold text-lg transition-all duration-150 bg-transparent z-0"
      >
        Yearly
        <span
          class="ml-2 align-middle inline-block bg-white border border-border text-xs px-2 py-0.5 rounded-md shadow-sm font-medium"
        >
          7% OFF
        </span>
      </button>
    </div>
  </div>

  <div class="max-w-4xl mx-auto mb-12" data-section="modules">
    <div class="flex justify-center gap-2 items-center mb-6">
      <img src="/assets/pricing/pricing_modules_box.png" alt="" />
      <div class="text-base text-title-section font-normal">
        Select your modules
      </div>
    </div>

    {
      pricingData.Modules.map((plan, idx) => (
        <ModuleAddOnCard
          {...plan}
          featuresId={`module-features-${idx}`}
          startOpen={idx === 0}
        />
      ))
    }
  </div>

  <div class="max-w-4xl mx-auto" data-section="addons">
    <div class="flex justify-center gap-2 items-center mb-6">
      <img src="/assets/pricing/pricing_addons_box.png" alt="" />
      <div class="text-base text-title-section font-normal">
        Select your addons
      </div>
    </div>

    {
      pricingData.Addons.map((plan, idx) => (
        <ModuleAddOnCard
          {...plan}
          featuresId={`addon-features-${idx}`}
        />
      ))
    }
  </div>

  <div
    id="pricing-summary"
    class="hidden max-w-4xl mx-auto mt-8 mb-4 p-8 rounded-2xl border border-border bg-card"
  >
    <h4 class="text-xl font-semibold text-gray-800 mb-4">Your Selection</h4>
    <ul id="selected-plans-list" class="divide-y divide-border mb-6"></ul>
    <div class="flex justify-between items-center pt-4 border-t border-border">
      <span class="text-lg font-semibold text-gray-800">Total</span>
      <div>
        <span id="pricing-total" class="text-3xl font-semibold">$0</span>
        <span
          id="pricing-total-period"
          class="text-xl text-gray-400 font-semibold ml-1">/month</span
        >
      </div>
    </div>
  </div>
</div>

<script>
  import "../../scripts/pricing.ts";
</script>
