---
import PrimaryBtn from "../../components/buttons/PrimaryBtn.astro";
import SecondaryButton from "../../components/buttons/SecondaryButton.astro";
import ModuleAddOnCard from "../../components/pricing/module-add-on-card.astro";
import SectionSubtitle from "../../components/shared/section-subtitle.astro";
import SectionTitle from "../../components/shared/section-title.astro";
import Section from "../../components/shared/section.astro";

const YEARLY_DISCOUNT_PCT = 10;

type PricingPlan = {
  title: string;
  description: string;
  price: string;
  annualPrice: string;
  features: string[];
  comingSoon?: boolean;
};

type PricingData = {
  Modules: PricingPlan[];
  Addons: PricingPlan[];
};

const pricingData: PricingData = {
  Modules: [
    {
      title: "Compliance Module",
      description:
        "Build and run a structured, audit-ready compliance program without changing how your team works. Centralize policies, evidence, risk, vendors, and controls in one system designed to scale with your organization.",
      price: "$450",
      annualPrice: "$5,000",
      features: [
        "Unlimited Frameworks",
        "Program Creation",
        "Evidence Upload",
        "Policy and Procedures",
        "Vendor Management",
        "Risk Management",
        "Asset Management",
        "Personnel Management",
        "Questionnaire Automation",
        "Vulnerability Management",
        "Integrations",
        "Configurable Workflows and Notifications",
        "User and Group Level Permissions",
        "Unlimited Users",
        "Single Sign-On (SSO)",
        "Auditor Access",
        "1:1 Slack Support",
      ],
    },
    {
      title: "Trust Center",
      description:
        "Show prospects and customers exactly how you handle security and compliance. Share documentation behind NDA, customize your branding, and provide transparent subprocessor disclosures all in a professional Trust Center built to accelerate your sales process.",
      price: "$300",
      annualPrice: "$3,000",
      features: [
        "Unlimited Documents",
        "Subprocessor Management",
        "Clickwrap NDA",
        "Visitor Analytics",
        "Custom Domain and Branding",
        "Subprocessor Embedding",
      ],
    },
  ],
  Addons: [
    {
      title: "Additional Evidence Storage (100GB)",
      description:
        "Expand your secure storage capacity for compliance evidence. Keep your documentation organized and accessible.",
      price: "$10",
      annualPrice: "n/a",
      features: ["Secure Storage for Additional Evidence"],
    },
    {
      title: "Trust Center Attribution Removal",
      description:
        "Removes the \u201cPowered by Openlane\u201d footer from your Trust Center.",
      price: "$10",
      annualPrice: "$100",
      features: [
        "Remove Attribution from Trust Center",
        "Custom Footer Text",
        "Custom Footer Link",
      ],
      comingSoon: true,
    },
  ],
};
---

<Section showHeroDots>
  <div class="mx-auto max-w-150">
    <SectionTitle>Pricing</SectionTitle>
    <div class="mt-6 flex justify-center gap-4">
      <SectionSubtitle>
        Modular pricing built for growing teams. We keep it simple: clear costs,
        flexible add-ons, and no surprises. Compliance that fits your team - and
        your budget.</SectionSubtitle
      >
    </div>
  </div>
</Section>
<Section class="p-0!" slotClass="p-0!">
  <div
    class="grid grid-cols-2 grid-rows-2 md:grid-cols-4 md:grid-rows-1 *:min-h-20"
  >
    <div
      class="flex items-center justify-center gap-2 border-r border-b border-dashed border-dashed-border px-4 py-3 md:border-b-0"
    >
      <img src="/assets/pricing/pricing_transparent_pricing.png" alt="" />
      <div class="font-outfit font-normal text-sm text-subtitle">
        Transparent pricing
      </div>
    </div>
    <div
      class="flex items-center justify-center gap-2 border-r border-b border-dashed border-dashed-border px-4 py-3 md:border-b-0"
    >
      <img src="/assets/pricing/pricing_feature_rich.png" alt="" />
      <div class="font-outfit font-normal text-sm text-subtitle">
        Feature-rich modules
      </div>
    </div>
    <div
      class="flex items-center justify-center gap-2 border-r border-dashed border-dashed-border px-4 py-3"
    >
      <img src="/assets/pricing/pricing_pick_what_you_need.png" alt="" />
      <div class="font-outfit font-normal text-sm text-subtitle">
        Pick what you need
      </div>
    </div>
    <div
      class="flex items-center justify-center gap-2 border-r border-dashed border-dashed-border px-4 py-3"
    >
      <img src="/assets/pricing/pricing_no_user_fees.png" alt="" />
      <div class="font-outfit font-normal text-sm text-subtitle">
        No per-user fees
      </div>
    </div>
  </div>
</Section>
<Section class="p-0!" slotClass="p-0!">
  <div class="flex justify-center my-5">
    <div
      class="flex items-center justify-center bg-tabs rounded-xl p-1 shadow-sm"
      data-yearly-discount={YEARLY_DISCOUNT_PCT}
    >
      <button
        data-billing="monthly"
        class="relative px-8 py-2 rounded-xl font-semibold text-lg transition-all duration-150 bg-white shadow z-1"
      >
        Monthly
      </button>
      <button
        data-billing="yearly"
        class="relative px-8 py-2 rounded-xl font-semibold text-lg transition-all duration-150 bg-transparent z-0"
      >
        Yearly
        {
          YEARLY_DISCOUNT_PCT > 0 && (
            <span class="font-mono text-chips-text text-xs ml-2 align-middle inline-block bg-white border border-border px-2 py-0.5 rounded-md shadow-sm font-medium">
              {YEARLY_DISCOUNT_PCT}% OFF
            </span>
          )
        }
      </button>
    </div>
  </div>
</Section>
<Section class="p-0!" slotClass="p-0!">
  <div class="flex justify-center gap-2 items-center my-4">
    <img src="/assets/pricing/pricing_modules_box.png" alt="" />
    <div class="text-base text-title-section font-normal">
      Select your modules
    </div>
  </div>
</Section>
<Section>
  <div class="pt-10 pb-1">
    <div class="max-w-4xl mx-auto mb-12" data-section="modules">
      {
        pricingData.Modules.map((plan, idx) => (
          <ModuleAddOnCard
            {...plan}
            featuresId={`module-features-${idx}`}
            startOpen={idx === 0}
          />
        ))
      }
    </div>
  </div>
</Section>
<Section class="p-0!" slotClass="p-0!">
  <div class="flex justify-center gap-2 items-center my-4">
    <img src="/assets/pricing/pricing_addons_box.png" alt="" />
    <div class="text-base text-title-section font-normal">
      Select your addons
    </div>
  </div>
</Section>
<Section>
  <div class="pt-10 pb-1">
    <div class="max-w-4xl mx-auto" data-section="addons">
      {
        pricingData.Addons.map((plan, idx) => (
          <ModuleAddOnCard {...plan} featuresId={`addon-features-${idx}`} />
        ))
      }
    </div>
  </div>
</Section>
<!-- <Section>
  <div class="min-h-screen pt-10 pb-1">
    <div class="max-w-4xl mx-auto mb-12" data-section="modules">
      {
        pricingData.Modules.map((plan, idx) => (
          <ModuleAddOnCard
            {...plan}
            featuresId={`module-features-${idx}`}
            startOpen={idx === 0}
          />
        ))
      }
    </div>

    <div class="max-w-4xl mx-auto" data-section="addons">
      {
        pricingData.Addons.map((plan, idx) => (
          <ModuleAddOnCard {...plan} featuresId={`addon-features-${idx}`} />
        ))
      }
    </div>
  </div>
</Section> -->
<Section class="p-2!"
  ><div class="font-outfit font-normal text-base text-title-section">
    Overview
  </div></Section
>
<Section>
  <div
    id="pricing-summary"
    class="max-w-4xl mx-auto mt-8 mb-4 border border-dashed border-dashed-border"
  >
    <ul
      id="selected-plans-list"
      class="p-5 md:p-8 divide-y divide-dashed divide-dashed-border mb-6 bg-white"
    >
    </ul>
    <div
      class="flex justify-between items-center px-8 border border-dashed border-dashed-border bg-card"
    >
      <span class="font-outfit font-normal text-base text-subtitle">Total</span>
      <div class="flex items-baseline gap-2">
        <span
          id="pricing-total-original"
          class="hidden font-outfit text-lg font-medium text-subtitle line-through"
        ></span>
        <span
          id="pricing-total"
          class="font-outfit text-2xl font-medium text-title-section">$0</span
        >
        <span
          id="pricing-total-period"
          class="text-xl text-gray-400 font-semibold ml-1">/month</span
        >
      </div>
    </div>
  </div>
</Section>
<Section class="p-0!" slotClass="p-0!">
  <div class="flex flex-col sm:flex-row justify-center items-center gap-4 my-5">
    <PrimaryBtn
      class="w-50 h-auto inline-block px-6 py-3"
      href="https://console.theopenlane.io/signup"
    >
      Get Started for Free
    </PrimaryBtn>
    <SecondaryButton class="w-auto whitespace-nowrap" href="/demo" astroReload
      >Book Demo</SecondaryButton
    >
  </div>
</Section>
<script>
  import "../../scripts/pricing.ts";
</script>
